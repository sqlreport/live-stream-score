<!DOCTYPE html>
<html>
  <head>
    <title>Stopwatch</title>
    <style>
      button {
  font-size: 20px;
  padding: 10px 20px;
}
    </style>
    <script>
      let stopwatchInterval;
      let endTime;
      let remainingTimeWhenStopped;

      function startStopwatch() {
        clearInterval(stopwatchInterval);
        let userInput = document.getElementById("start-time-input").value;
        endTime = Date.now();
        if (userInput) {
          let inputArray = userInput.split(":");
          let minutes = parseInt(inputArray[0]) || 0;
          let seconds = parseInt(inputArray[1]) || 0;
          endTime = endTime + (minutes * 60000 + seconds * 1000);
        } else {
          endTime = endTime + (remainingTimeWhenStopped || 0);

        }
        stopwatchInterval = setInterval(function() {
          let remainingTime = endTime - Date.now();
          if (remainingTime <= 0) {
            clearInterval(stopwatchInterval);
            document.getElementById("stopwatch").innerHTML = "Time's up!";
            return;
          }
          let minutes = Math.floor(remainingTime / 60000);
          let seconds = Math.floor((remainingTime % 60000) / 1000);
          let milliseconds = Math.floor(remainingTime % 1000 / 100);
          if (minutes === 0) {
            document.getElementById("stopwatch").innerHTML =
              seconds + "." + milliseconds;
          } else {
            document.getElementById("stopwatch").innerHTML =
              minutes + ":" + seconds.toString().padStart(2, "0");
          }
          localStorage.setItem("remainingTimeWhenStopped", remainingTime);
        }, 10);
      }

      function stopStopwatch() {
  if (stopwatchInterval) {
    clearInterval(stopwatchInterval);
    remainingTimeWhenStopped = endTime - Date.now();
    document.getElementById("start-time-input").value = "";

  }
}


      function resetStopwatch() {
        clearInterval(stopwatchInterval);
        let userInput = document.getElementById("start-time-input").value;
        let period = document.getElementById("period").value;
        if (userInput) {
          let inputArray = userInput.split(":");
          let minutes = parseInt(inputArray[0]) || 0;
          let seconds = parseInt(inputArray[1]) || 0;
          endTime = endTime + (minutes * 60000 + seconds * 1000);
        } else {
          endTime = endTime + (remainingTimeWhenStopped || 0);

        }
        document.getElementById("stopwatch").innerHTML = "20:00";
        remainingTimeWhenStopped = 1200000;
        localStorage.setItem("remainingTimeWhenStopped", remainingTimeWhenStopped);
        localStorage.setItem("period", period);
      }
    </script>
  </head>
  <body>
    <h1>Stopwatch</h1>
    <div id="stopwatch">0:00:00</div>
    <br>
    <button onclick="startStopwatch()">Start</button>
    <button onclick="stopStopwatch()">Stop</button>
    <button onclick="resetStopwatch()">Reset</button>

    <br><br>
    Start Time (in seconds): <input type="text" id="start-time-input">
    <br><br>
    Period: <input type="text" id="period">
  </body>
</html>

